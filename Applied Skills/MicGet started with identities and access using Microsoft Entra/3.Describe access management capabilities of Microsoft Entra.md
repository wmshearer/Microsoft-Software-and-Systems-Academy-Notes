============================================================
MICROSOFT ENTRA — ACCESS MANAGEMENT CAPABILITIES (NOTES)
============================================================

BIG PICTURE
- Access management in Microsoft Entra focuses on:
  - Who can access what (identity + permissions)
  - Under what conditions access is allowed (risk/location/device/app)
  - Enforcing least privilege (give only the access needed)

------------------------------------------------------------
CONDITIONAL ACCESS (CA)
------------------------------------------------------------

What it is
- A policy engine that adds an extra security layer BEFORE access to apps/data
- Uses “signals” (context) to make access decisions automatically
- Think: IF-THEN rules for access

Key point
- Conditional Access is enforced AFTER first-factor authentication succeeds
  - Example: user enters password successfully → CA then evaluates signals → may require MFA or block

Common signals CA evaluates
- User / group / role (who)
- App or resource being accessed (what)
- Location / network (where)
- Device state and platform (device health + OS)
- Client app type (browser vs mobile vs desktop)
- Risk signals (sign-in risk / user risk from Entra ID Protection)
- Insider risk (via Microsoft Purview adaptive protection)
- Device filters (target specific device properties)
- Authentication context (extra protection for sensitive actions/content)

------------------------------------------------------------
CONDITIONAL ACCESS POLICY STRUCTURE
------------------------------------------------------------

A Conditional Access policy has 2 major parts:
1) Assignments  → controls when the policy applies (who/what/where/when)
2) Access controls → controls what happens when it applies (how it’s enforced)

------------------------------------------------------------
1) ASSIGNMENTS (WHO / WHAT / WHERE / WHEN)
------------------------------------------------------------

Important rule:
- Assignments are logically ANDed
  - If you configure multiple assignments, ALL must match for the policy to trigger

Users (who)
- All users / specific users / groups
- Directory roles (admins)
- External guests
- Workload identities (service principals, etc.)

Target resources (what)
- Cloud apps (Microsoft apps, O365, Azure APIs, admin portals, enterprise apps)
- User actions (ex: register security info, join/register devices)
- Global Secure Access traffic profiles (preview)
- Authentication context (protect sensitive SharePoint content, enforce ToU, require managed device, etc.)

Network / Location (where)
- Any location
- Trusted locations / trusted IP ranges
- Named locations
- Compliant networks (networks meeting org policy requirements)

Conditions (when / how risky)
- Sign-in risk (chance this sign-in isn’t the real user)
- User risk (chance the identity/account is compromised)
- Insider risk (signals from Purview)
- Device platform (Windows/macOS/iOS/Android/etc.)
- Client apps (browser, modern auth clients, legacy auth, mobile/desktop apps)
- Filters for devices (target privileged workstations, specific device properties, etc.)

------------------------------------------------------------
2) ACCESS CONTROLS (HOW ENFORCED)
------------------------------------------------------------

Once the policy applies, CA enforces one of these outcomes:

Block access
- Deny sign-in to the resource

Grant access
- Allow access, either:
  - With no extra requirements, OR
  - With one or more “grant controls” such as:
    - Require MFA
    - Require specific authentication strength/method
    - Require compliant device (Intune compliance)
    - Require password change
    - Etc.

Session controls
- Allow sign-in but restrict what the user can do in-session
- Examples:
  - Conditional Access App Control (via Defender for Cloud Apps)
    - block download / cut-copy-print for sensitive docs
    - require labeling
  - Sign-in frequency (force reauth every X hours)
  - App enforced restrictions / limited experience based on device state

Summary line
- Assignments decide *when* CA applies
- Access controls decide *what happens* when it applies

------------------------------------------------------------
GLOBAL SECURE ACCESS (GSA) — WHAT IT IS
------------------------------------------------------------

What it is
- Microsoft’s Security Service Edge (SSE) solution
- Unifies:
  - Microsoft Entra Internet Access (identity-aware Secure Web Gateway)
  - Microsoft Entra Private Access (identity-aware access to private resources)

Why it matters
- Replaces/augments legacy VPN patterns
- Reduces lateral movement risk from “wide-open VPN tunnels”
- Adds identity + device + risk-based controls to network access
- Routes traffic through Microsoft controls using the Global Secure Access client

------------------------------------------------------------
MICROSOFT ENTRA PRIVATE ACCESS
------------------------------------------------------------

What it does
- Secures access to private corporate resources (on-prem/private cloud)
- Helps replace legacy VPNs
- Uses an enterprise app “container” + a connector (broker) to the private resource

Two approaches
- Quick Access
  - Single enterprise app container
  - Add “application segments” defined by FQDN/IP/port/ranges
  - Link Conditional Access policies to that container

- Per-app Access (Global Secure Access app)
  - Multiple enterprise app containers
  - More granular targeting of users/groups/policies per resource group
  - Better when different private resources need different rules

------------------------------------------------------------
MICROSOFT ENTRA INTERNET ACCESS
------------------------------------------------------------

What it is
- Identity-centric Secure Web Gateway (SWG)
- Secures SaaS apps + public internet traffic
- Adds visibility and controls via Traffic Logs

Key capabilities mentioned
- Token theft protection with “compliant network” checks via Conditional Access
- Enforces at:
  - Authentication plane (during sign-in)
  - Data plane via Continuous Access Evaluation (CAE) for supported services

CAE (Continuous Access Evaluation)
- Near real-time policy enforcement
- If risk/location/device changes, access can be adjusted quickly

Tenant restrictions
- Helps prevent data exfiltration to other tenants/personal accounts
- Controls external tenant access patterns

Web controls
- Traffic forwarding profiles (control what internet traffic is routed/controlled)
- Web content filtering by category/domain

------------------------------------------------------------
GLOBAL SECURE ACCESS DASHBOARD (VISIBILITY)
------------------------------------------------------------

Provides widgets like:
- Snapshot: users/devices/apps secured (filter by Internet/Private/M365 traffic)
- Usage profiling (preview): patterns over time by category
- Alerts & notifications (preview):
  - unhealthy remote network
  - increased external tenant activity
  - token/device inconsistency
  - web content blocked
- Cross-tenant access: sign-ins, distinct tenants, unseen tenants, users/devices
- Web category filtering summary
- Device status (active vs inactive devices)

------------------------------------------------------------
ROLES & RBAC IN MICROSOFT ENTRA
------------------------------------------------------------

Microsoft Entra roles (Entra RBAC)
- Control access to Entra resources (users, groups, apps, directory settings)
- Built-in roles = fixed permission bundles (cannot edit)
  - Examples:
    - Global Administrator (everything in Entra)
    - User Administrator (manage users/groups; support tickets; service health)
    - Billing Administrator (subscriptions/purchases/support/service health)

Custom roles
- You pick permissions from the same permission set as built-in roles
- Two-step:
  1) Create custom role definition (permissions)
  2) Assign role (scope + who gets it)

Scope
- Org-wide scope OR object scope (ex: single app)

Licensing note
- Custom roles require Entra ID P1 or P2

Best practice: Least privilege
- Assign the minimum role needed
- Avoid giving Global Admin unless absolutely necessary

------------------------------------------------------------
MICROSOFT ENTRA RBAC vs AZURE RBAC
------------------------------------------------------------

Entra RBAC
- Controls Entra directory resources (users, groups, apps)

Azure RBAC
- Controls Azure resource manager resources (VMs, storage, VNets, etc.)

#### Same concept (role + assignment + scope), different systems and enforcement points

MODULE ASSESSMENT
============================================================

1) Which assignment condition enforces policies based on a user's risk level?
→ User risk condition

1) Which Conditional Access condition targets OS of a device?
→ Device platform condition

1) Key reason for using custom roles in Microsoft Entra?
→ To tailor permissions to specific organizational needs

1) What distinguishes Microsoft Entra RBAC from Azure RBAC?
→ Microsoft Entra RBAC controls access to identity resources, while Azure RBAC controls access to Azure resources

1) Feature to monitor increased external tenant activity?
→ Cross-tenant access widget

1) Feature that helps prevent data exfiltration to personal accounts?
→ Tenant restrictions

1) How do Microsoft Entra roles support Zero Trust?
→ By enabling role-based access control to ensure least privilege access

1) Conditional Access control to limit access to managed devices only?
→ Require device to be marked as compliant

1) Feature to secure private corporate resources without traditional VPN?
→ Microsoft Entra Private Access

============================================================
