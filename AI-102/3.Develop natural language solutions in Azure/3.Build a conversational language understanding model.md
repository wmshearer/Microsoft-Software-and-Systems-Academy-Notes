# Azure Language — Conversational Language Understanding (CLU)

## Natural Language Understanding (NLU) Overview
NLU focuses on **understanding meaning** from natural language input.

Common design pattern:
- User enters natural language (text or speech)
- Language model determines **intent + entities**
- Application performs the appropriate action

Azure Language enables NLU with:
- Small training datasets
- Customizable language models
- REST APIs, SDKs, and Language Studio

---

## Azure Language Capabilities

### Pre-configured (No Training Required)
Ready to use once the resource is created:

- **Summarization** – Extracts key sentences from documents or conversations
- **Named Entity Recognition (NER)** – Identifies people, locations, organizations, etc.
- **PII Detection** – Detects and redacts sensitive data (emails, IPs, names)
- **Key Phrase Extraction** – Pulls main concepts from text
- **Sentiment Analysis** – Classifies text as positive, neutral, or negative
- **Language Detection** – Identifies the language of text

Use case: fast insights without labeling or training

---

### Learned (Custom Models Required)
Require labeled data, training, and deployment:

- **Conversational Language Understanding (CLU)**  
  Predicts **intent** and extracts **entities** from user utterances

- **Custom Named Entity Recognition**  
  Extracts domain-specific entities from text

- **Custom Text Classification**  
  Categorizes text into custom-defined classes

- **Question Answering**  
  Returns answers from documents like FAQs (mostly preconfigured)

---

## Resources for Building a CLU Model

### Azure Language Resource
Required for:
- Authoring (training, deploying)
- Runtime predictions

Key items:
- **Endpoint**
- **Subscription key** (used in `Ocp-Apim-Subscription-Key` header)

---

### Language Studio
UI-based tool to:
- Create CLU projects
- Define intents, entities, utterances
- Train, test, deploy models
- Review predictions

Best for:
- Rapid development
- Visualization
- Iterative tuning

---

### REST API / SDKs
Alternative to Language Studio:
- Fully programmatic
- Asynchronous operations
- Supports C# and Python SDKs

Used for:
- CI/CD pipelines
- Automation
- Advanced integrations

---

## Intents, Utterances, and Entities

### Utterances
- What the **user actually says**
- Free-form natural language text

Examples:
- “What time is it?”
- “Switch on the fan”

---

### Intents
- The **meaning or goal** behind an utterance
- Represents an action or request

Examples:
- `GetTime`
- `GetWeather`
- `TurnOnDevice`
- `None` (required for out-of-scope or greetings)

---

### Entities
- Specific **data elements** inside an utterance
- Add context to intents

Examples:
- Location → “Paris”
- Device → “light”
- Time → “tomorrow”

Entity types:
- **Learned entities** (most flexible, default choice)
- **List entities** (fixed set of values + synonyms)
- **Prebuilt entities** (numbers, dates, emails, URLs, etc.)

---

## Labeling Best Practices
- Label **precisely** (only what you want extracted)
- Label **consistently** (same entity = same label everywhere)
- Label **completely** (all instances across all utterances)
- Use varied utterances:
  - Different wording
  - Different grammar
  - Different lengths

Good data quality = better model accuracy

---

## Patterns for Similar Utterances
Used to disambiguate **similar sentence structures** with different intents.

Example:
- “Turn on the kitchen light” → TurnOnDevice
- “Is the kitchen light on?” → GetDeviceStatus
- “Turn off the kitchen light” → TurnOffDevice

Patterns use placeholders:
- `{DeviceName}`
- Optional punctuation `[?]`

Benefit:
- Fewer training samples needed
- Higher intent accuracy

---

## Prebuilt Entity Components
Used for common data types:
- Email
- URL
- Numbers
- Date/time
- Currency

Benefits:
- No training required
- Faster model development
- Up to **5 prebuilt components per entity**

---

## Model Lifecycle (Iterative)
1. **Train** – Learn from labeled utterances
2. **Test** – Validate predictions
3. **Publish** – Deploy to an endpoint
4. **Review** – Analyze errors and refine data

Repeat to improve performance over time.

---

# Module Assessment — Answers

## 1) What do phrases like “turn on the light” represent?
✅ **Utterances**

## 2) How should the city in “Book a flight to Paris” be modeled?
✅ **As an entity**

## 3) Simplest way to detect an email in an utterance?
✅ **Use prebuilt entity components**
