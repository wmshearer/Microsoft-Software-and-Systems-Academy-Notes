# Building AI agents in Visual Studio Code with Microsoft Foundry

## Why build agents (module framing)
Developers are moving beyond simple chat apps to build AI agents that automate complex tasks. Agents combine large language models with specialized tools to access data, perform actions, and complete workflows with minimal human intervention.

## Microsoft Foundry for Visual Studio Code extension (what it is)
The Microsoft Foundry extension turns Visual Studio Code into a platform for building, testing, and deploying AI agents using Microsoft Foundry Agent Service—without leaving the editor.

### What the extension enables (integrated experience)
- Agent discovery and management: browse, create, and manage agents inside Foundry projects
- Visual agent designer: configure instructions, tools, and capabilities in a graphical UI
- Integrated testing: test agents in a built-in playground
- Code generation: generate sample integration code to connect agents to apps
- Deployment pipeline: deploy agents to Microsoft Foundry for production use

## Key features and capabilities (extension)
### Agent Designer Interface
A visual designer used to define agent instructions, choose a model deployment, and configure tools.

### Built-in Playground
An integrated environment for real-time testing and refinement of agent behavior before deployment.

### Tool integration (supported tool types called out)
- RAG for knowledge-based responses
- Search capabilities for retrieval
- Custom actions for business logic
- Model Context Protocol (MCP) servers for extended functionality

### Project integration
Connects directly to Microsoft Foundry projects so you can use existing resources and deploy agents into established infrastructure.

## Installing the extension (steps)
- Open Visual Studio Code
- Open Extensions (or press `Ctrl+Shift+X`)
- Search for “Microsoft Foundry”
- Select Install
- Verify installation via status messages

## Typical extension workflow
- Install and configure extension
- Connect to a Microsoft Foundry project
- Create or import an agent
- Configure instructions and tools
- Test in the playground
- Iterate based on results
- Generate integration code

# Develop AI agents in Visual Studio Code

## Agent Service context (what it adds)
Foundry Agent Service is a managed Azure service building on the OpenAI Assistants API foundation, with added capabilities:
- Expanded model choice (beyond OpenAI)
- Enterprise security
- Advanced data integration with Azure data services
- Tooling ecosystem (built-in + custom tools)

## Prerequisites (before creating an agent)
- Complete extension setup and sign in to Azure
- Create/select a default Microsoft Foundry project
- Select and deploy a model (or use an existing deployment)

## Creating a new agent (extension flow)
- Open Microsoft Foundry Extension view in VS Code
- Go to Resources
- Select `+` next to Agents to create a new agent
- Configure agent properties in the Agent Designer view
When you create an agent, the extension opens:
- the agent `.yaml` file
- the Designer view

## Configuring agent properties (Designer)
Basic configuration includes:
- Agent name
- Model selection (deployment name used when deploying the model)
- Description
- System instructions (behavior/personality/response style)
- Agent ID (auto-generated)

## Agent YAML file (what it represents)
The agent is defined in YAML containing configuration details, including:
- version
- name, description, id
- metadata (authors, tags)
- model id and options (for example, temperature, top_p)
- instructions
- tools list

## Instruction design (best practices listed)
When writing system instructions:
- Be specific and clear
- Provide context
- Set boundaries (what it should/shouldn’t do)
- Include examples (when helpful)
- Define personality/tone
Customer service instruction examples include role/purpose, inquiry guidelines, escalation procedures, and tone preferences.

## Deploying agents (from the extension)
Deployment steps:
- Select “Create on Microsoft Foundry” in the Designer (bottom-left)
- Wait for deployment completion
- Refresh Azure Resources view
- Confirm agent appears under Agents

After deployment, you can:
- View agent details (Agent Preferences page)
- Edit and redeploy using “Update on Microsoft Foundry”
- Generate integration code via “Open Code File”
- Test via “Open Playground”

## Testing and iteration (playground)
Playground supports:
- Real-time conversations
- Instruction validation (does it follow instructions)
- Behavior testing across request types
- Iterative refinement based on results

## Threads, messages, and runs (how sessions are tracked)
- Threads: conversation sessions that store messages and manage context
- Messages: individual interactions (text, images, files)
- Runs: single execution of an agent using its configuration + thread messages

# Extend AI agent capabilities with tools

## What tools are (agent meaning)
Tools are programmatic functions that let agents automate actions and access information beyond training data. Agents can automatically decide when to invoke tools, process results, and use them in responses.

## Built-in tools listed
- Code Interpreter: write/execute Python for calculations, analysis, charts, file processing, complex problem-solving
- File Search: RAG via uploading/indexing documents, searching knowledge bases, supports PDF/Word/text
- Grounding with Bing Search: internet search for real-time data and citations/sources
- OpenAPI Specified Tools: connect to external APIs using OpenAPI 3.0
- Model Context Protocol (MCP): standardized tool interfaces for extended/community tools

## Adding tools in VS Code (process)
- Select agent in the extension
- Go to Tools section in configuration panel
- Browse tools in tool library
- Configure tool settings as needed
- Test via playground
If a tool needs assets (example: File Search), you can use an existing vector store asset or create a new one for uploaded files.

## MCP servers (why they matter)
MCP servers provide a standardized way to add tools using an open protocol, enabling:
- Standardized tool communication
- Reusable components across agents
- Community tools via MCP registries
- Simplified integration through consistent interfaces
Extension supports registry browsing, custom server addition, config management, and testing/validation.

## Tool management best practices (listed)
- Identify required capabilities
- Start with built-in tools before custom
- Test thoroughly across scenarios
- Monitor performance to track usage and effectiveness

# Module assessment answers

## Q1: When you create a new agent in the Microsoft Foundry extension, what two views are automatically opened?
Answer: The YAML file and the Designer view

## Q2: What is a key benefit of using Model Context Protocol (MCP) servers for agent tools?
Answer: They provide reusable components that work across different agents

## Q3: How does the Microsoft Foundry Agent Service manage conversation sessions when users interact with deployed agents?
Answer: The system creates individual threads for each conversation to manage context and message history
