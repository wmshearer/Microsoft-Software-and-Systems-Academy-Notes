# Microsoft Agent Framework & Microsoft Foundry Agents

## Overview
AI agents use generative AI and large language models (LLMs) to interpret data, make decisions, and perform tasks autonomously. Unlike traditional programs, agents can manage complex workflows with minimal human intervention, making them well-suited for automating business processes.

Developers can build agents using the **Microsoft Agent Framework**, an open-source SDK that simplifies integrating AI models into applications. The framework supports agents from multiple providers, including Microsoft Foundry, Azure OpenAI, OpenAI, Microsoft Copilot Studio, and Anthropic.  
This module focuses on **Microsoft Foundry Agents**, which run on **Microsoft Foundry Agent Service** and provide enterprise-grade capabilities.

---

## Microsoft Foundry Agent Service
A fully managed Azure service that lets developers securely build, deploy, and scale AI agents without managing compute or storage.

Key value:
- Enterprise-grade security and scalability
- Automatic tool calling
- Managed conversation state (threads)
- Tight integration with Azure services

The **Microsoft Agent Framework** can be used on top of Foundry Agent Service to gain flexibility, consistency across agent types, and multi-agent orchestration support.

---

## What is an AI agent (Agent Framework view)
An AI agent is a program that:
- Uses LLMs to understand context
- Makes decisions
- Performs tasks on behalf of users or applications
- Can operate autonomously without continuous human oversight

The Agent Framework provides a unified way to build such agents across providers.

---

## Microsoft Agent Framework core components

### Chat clients
Abstracts connections to different AI providers under a common interface.  
Supports providers such as Azure OpenAI, OpenAI, Anthropic, and Foundry.

### Function tools
Containers for custom functions that extend agent capabilities.  
Agents automatically decide when to invoke functions.

### Built-in tools
Prebuilt tools available to agents:
- Code Interpreter (Python execution)
- File Search (document analysis)
- Web Search (internet access)

### Conversation management
- Role-based messages: USER, ASSISTANT, SYSTEM, TOOL
- Persistent conversation context using `AgentThread`

### Workflow orchestration
Supports:
- Sequential workflows
- Parallel execution
- Group chat
- Handoff patterns for multi-agent systems

---

## What is a Microsoft Foundry Agent
A **Microsoft Foundry Agent** is a specialized agent type within the Agent Framework that runs on Foundry Agent Service.

Key benefits:
- Enterprise-level Azure integration
- Automatic tool invocation
- Built-in thread and memory management
- Secure authentication (Azure CLI, RBAC)
- MCP (Model Context Protocol) support

You get the Agent Framework flexibility plus Foundry’s enterprise runtime.

---

## Agent Framework core concepts

### BaseAgent
The foundation for all agent types, providing a consistent interface.

### AgentThread
Manages persistent conversation state and message history across sessions.

### Chat messages
Structured, role-based communication enabling clean agent interactions.

### Workflow orchestration
Supports:
- Sequential agent execution
- Parallel agents
- Group conversations
- Control handoff between agents

### Multi-modal support
Agents can work with text, images, and structured outputs.

### Function tools
Custom Python functions with automatic schema generation.

### Authentication
Supports:
- Azure CLI credentials
- API keys
- MSAL / Entra ID
- RBAC

---

## Creating a Microsoft Foundry Agent (high level)
To create a Foundry Agent using the Microsoft Agent Framework:

- Create a Microsoft Foundry project
- Set up authentication credentials
- Create an `AzureAIAgentClient`
- Define a `ChatAgent` with:
  - Instructions
  - Tools (functions)
- Create an `AgentThread` for conversation context

Relevant code/commands appear inline like `example_code_here`.

---

## Microsoft Foundry Agent key components

### AzureAIAgentClient
Manages the secure connection to your Foundry project and models.

### ChatAgent
The core agent class that combines:
- Client
- Instructions
- Tools

### AgentThread
Handles conversation history and state automatically.

### Tools integration
Supports both built-in tools and custom Python functions.

### Authentication credentials
Supports Azure-native authentication options for enterprise security.

---

## Tools in Microsoft Agent Framework

### Built-in tools
Available by default:
- Code Interpreter
- File Search
- Web Search

No extra setup required.

### Custom function tools
Custom Python functions that extend agent capabilities.

Key requirements:
- Proper type annotations
- Clear parameter and function descriptions

You add tools by passing them to the agent via the `tools` parameter.

---

## Tool invocation model
- You do NOT manually call tools
- The agent decides when a tool is needed
- The framework:
  - Selects the correct tool
  - Executes it
  - Feeds results back to the LLM

Supports multiple tools per agent with automatic orchestration.

---

## Best practices for tool development
- Use clear, descriptive docstrings
- Apply correct Python type hints
- Keep tools focused on a single responsibility
- Handle errors gracefully
- Return structured, meaningful data

---

## Knowledge check answers

### Q1: Key steps to create a Microsoft Foundry Agent
Correct answer:
- Create an AzureAIAgentClient, define a ChatAgent with instructions and tools, and create an AgentThread for conversations.

### Q2: Component that manages conversation state
Correct answer:
- AgentThread

### Q3: How to add custom functionality
Correct answer:
- Create Python functions with proper type annotations and descriptions, then pass them to the ChatAgent’s tools parameter.
