# AI agents and Microsoft Foundry Agent Service (deep dive)

## What is an AI agent
An AI agent is a software service that uses generative AI to understand context, make decisions, use grounding data, and take actions on behalf of a user or another system. Unlike traditional applications or chatbots, AI agents can operate independently, execute complex workflows, and automate processes without constant human intervention.

AI agents enable organizations to automate tasks, improve decision-making, and enhance user experiences, making them valuable for driving efficiency and innovation.

## Why AI agents are useful
AI agents provide value through:
- Automation of routine tasks: handle repetitive work so humans can focus on higher-value activities.
- Enhanced decision-making: analyze large volumes of data, identify trends, predict outcomes, and generate recommendations autonomously.
- Scalability: support growth without proportional increases in human resources.
- 24/7 availability: operate continuously without downtime.
Agents simulate human-like intelligence and can be applied across domains such as customer service, automation, analytics, and development.

## Common AI agent use cases

### Personal productivity agents
Assist with scheduling, email drafting, document creation, and data analysis. Example: Microsoft 365 Copilot.

### Research agents
Monitor trends, gather data, and generate reports for domains such as finance, healthcare, and marketing.

### Sales agents
Automate lead research, follow-ups, and scheduling, enabling sales teams to focus on closing deals.

### Customer service agents
Handle routine inquiries and common issues via chat or messaging platforms. Example: Cineplex using an AI agent to process refunds.

### Developer agents
Assist with coding tasks such as code review, bug fixing, and repository management. Example: GitHub Copilot.

## Security risks of AI agents
Because agents can access sensitive data and act autonomously, they introduce advanced security risks:

- Data leakage and privacy exposure
- Prompt injection and manipulation attacks
- Unauthorized access and privilege escalation
- Data poisoning
- Supply chain vulnerabilities
- Over-reliance on autonomous actions
- Inadequate auditability and logging
- Model inversion and output leakage

## Mitigation strategies (security-by-design)
To reduce risk:
- Enforce RBAC and least-privilege access
- Validate and filter inputs to prevent prompt injection
- Require human-in-the-loop approvals for sensitive actions
- Maintain comprehensive logging and traceability
- Audit third-party integrations regularly
- Continuously retrain and validate models to detect drift or poisoning

# Microsoft Foundry Agent Service

## Purpose of Foundry Agent Service
Microsoft Foundry Agent Service is a fully managed Azure service for building, deploying, and scaling AI agents without managing compute or storage. It simplifies agent development by handling infrastructure and tool orchestration, allowing agents to be built via the portal or programmatically with minimal code.

It is designed for scenarios involving:
- Question answering using real-time or proprietary data
- Decision-making and action execution
- Automation of complex workflows

## Key features of Foundry Agent Service
- Automatic tool calling: handles model execution, tool invocation, and response handling
- Secure conversation management: uses threads to manage state and history
- Built-in tools: file retrieval, code interpreter, Bing, Azure AI Search, Azure Functions
- Model selection: choose from supported Azure OpenAI and Foundry catalog models
- Enterprise-grade security: privacy, compliance, and keyless authentication
- Flexible storage: platform-managed or bring-your-own Azure Blob Storage

## Foundry Agent Service resources
At minimum, an agent requires:
- Azure AI hub
- Azure AI project
Additional services can be added as needed.

Common architectures:
- Basic agent setup: Azure AI hub, Azure AI project, Foundry Tools
- Standard agent setup: Basic setup plus Azure Key Vault, Azure AI Search, and Azure Storage

## Developing apps that use agents (high-level pattern)
Agent integration typically follows this flow:
- Connect to the Microsoft Foundry project using project endpoint and Entra ID authentication
- Create or reference an agent, specifying:
  - Model deployment
  - Instructions (behavior and restrictions)
  - Tools and resources
- Create a thread to maintain conversation state
- Add messages and invoke the agent
- Retrieve responses and artifacts
- Repeat interaction as needed
- Delete agent and thread when finished to clean up resources

## Agent tools

### Knowledge tools
Used to ground prompts with contextual data:
- Bing Search
- File search (vector store)
- Azure AI Search
- Microsoft Fabric (Fabric Data Agent)
Third-party licensed data can be integrated via OpenAPI Spec tools.

### Action tools
Used to perform actions or execute code:
- Code Interpreter: sandboxed execution of model-generated Python code and file access
- Custom functions
- Azure Functions
- OpenAPI Spec tools for external APIs

# Module assessment answers

## Q1: What is the first step in setting up Microsoft Foundry Agent Service?
Answer: Create a Microsoft Foundry project

## Q2: Which element of an agent definition is used to specify its behavior and restrictions?
Answer: Instructions

## Q3: Which tool should you use to enable an agent to dynamically generate code to perform tasks or access data in files?
Answer: Code Interpreter
