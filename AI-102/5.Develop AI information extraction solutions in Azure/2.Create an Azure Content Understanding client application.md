# Azure Content Understanding REST API

## Overview
- Azure Content Understanding = multimodal analyzers
- Extracts information from:
  - Documents
  - Images
  - Audio
  - Video
- This module focuses on **client-side usage** via REST API
- Service is currently in **public preview**

## When to Use the REST API
- Build client applications that:
  - Submit content to an existing analyzer
  - Retrieve extracted fields programmatically
- Alternative to Microsoft Foundry portal (GUI)
- Common in automation and backend services

## Prerequisites
- A **Foundry Tools multi-service resource** is required
- Can be created by:
  - Creating a Foundry Tools resource directly
  - Creating a Microsoft Foundry hub (recommended)

## Required Configuration Values
- Foundry Tools **endpoint**
- One **API key** associated with the endpoint
- Retrieved from:
  - Azure portal
  - Microsoft Foundry portal
- Optional:
  - Use Microsoft Foundry SDK with Microsoft Entra ID
  - SDK can fetch endpoint and key programmatically

## Analyzer Creation Options
- Recommended:
  - Create analyzers using Microsoft Foundry portal
- Alternative:
  - Create analyzers via REST API using JSON schema

## Analyzer Schema Basics
- Analyzer is defined by a **schema**
- Schema describes:
  - Fields to extract or generate
  - Field types
  - Extraction method
- Fields can be:
  - `extract` → value exists in content
  - `generate` → inferred by AI

## Example Schema (Conceptual)
- Based on a **prebuilt analyzer**
- Example fields:
  - ContactName (string, extract)
  - EmailAddress (string, extract)
- Schema is submitted as JSON

## Creating an Analyzer via REST API
- Submit schema using:
  - HTTP `PUT` request
- Requires:
  - Analyzer name
  - API key in header
- Operation is **asynchronous**
- Response includes:
  - `Operation-Location` header
- Must poll operation URL with `GET` until complete

## Analyzer Creation Flow
1. Define schema JSON
2. PUT schema to analyzer endpoint
3. Receive Operation-Location
4. Poll with GET until status != Running

## Analyzing Content
- Submit content to an analyzer using:
  - HTTP `POST`
- Content input options:
  - URL to file
  - Binary file data (PDF, PNG, MP3, MP4, etc.)
- Endpoint must include:
  - Analyzer name
- API returns:
  - Operation ID
- Analysis is **asynchronous**

## Analysis Workflow
1. POST content to analyzer
2. Receive analysis operation ID
3. Poll results endpoint
4. Retrieve JSON output when succeeded

## Analysis Results Structure
- Result depends on:
  - Content type
  - Analyzer schema
  - Content itself
- Common elements:
  - Extracted fields
  - Confidence scores
  - Source spans
  - OCR layout (for documents/images)

## Extracted Fields
- Returned as **type-specific values**
- Examples:
  - `valueString`
  - `valueNumber`
  - `valueDate`
- Each field includes:
  - Confidence
  - Location spans
  - Source reference

## OCR Layout (Document Analyzers)
- Returned automatically for document-based analyzers
- Includes:
  - Pages
  - Lines
  - Words
  - Bounding regions
- Useful for validation and visualization

## Parsing Results
- Client application must parse JSON
- Typical approach:
  - Iterate through contents
  - Access fields object
  - Read type-specific values

## Key Exam Concepts
- REST API requires **endpoint + key**
- Analyzer must already exist
- Analyze calls are **asynchronous**
- Analyzer name is required for analysis
- Fields are returned as **typed values**, not raw strings

## Module Assessment – Answers
1. What configuration values are needed?
   - The endpoint and key for the Azure AI service

2. What must be specified when calling analyze?
   - The name of the analyzer

3. How are extracted fields returned?
   - As type-specific values
