LAB: Networking Essentials and Configuration
Ubuntu Linux System Administration Fundamentals

Overview
This lab covers viewing network configuration, DNS and hostname setup,
firewall configuration using UFW, and secure remote access with SSH.

------------------------------------------------------------
Exercise 1: View and Understand Network Configuration
Objective:
Examine the VMâ€™s current DHCP-based network configuration (read-only).

- [ ] Display active network interfaces:
  Command: `ip a`
  Note: Look for eth0 or ens160 with IP address 10.0.0.4

- [ ] Check default gateway and routing table:
  Command: `ip route`
  Explanation: Shows how traffic is routed and the default gateway

- [ ] Test external connectivity by IP:
  Command: `ping -c 4 8.8.8.8`

- [ ] Test external connectivity by DNS:
  Command: `ping -c 4 google.com`

- [ ] View Netplan configuration:
  Command: `sudo cat /etc/netplan/*.yaml`
  Explanation: Confirms DHCP is enabled (Azure-managed networking)

- [ ] Review Netplan documentation:
  Command: `man netplan`

------------------------------------------------------------
Exercise 2: Set DNS and Hostname Resolution
Objective:
Manually configure DNS resolvers and change the system hostname.

- [ ] Edit DNS resolver configuration:
  Command: `sudo nano /etc/systemd/resolved.conf`

  Add the following lines:
  `DNS=8.8.8.8 1.1.1.1`
  `FallbackDNS=9.9.9.9`

  Save with CTRL+O, Enter
  Exit with CTRL+X

- [ ] Restart the DNS resolver service:
  Command: `sudo systemctl restart systemd-resolved`

- [ ] Set the system hostname:
  Command: `sudo hostnamectl set-hostname ubuntu-vm3`

- [ ] Verify hostname configuration:
  Command: `hostnamectl`

- [ ] Create symlink for DNS resolution tool (if needed):
  Command: `sudo ln -s /usr/bin/resolvectl /usr/bin/systemd-resolve`

- [ ] View DNS resolver status:
  Command: `systemd-resolve --status`

- [ ] Review hostname and DNS documentation:
  Commands:
  `man hostnamectl`
  `man systemd-resolved`

------------------------------------------------------------
Exercise 3: Enable Firewall with UFW and Allow SSH
Objective:
Secure the system using UFW while ensuring SSH access is not blocked.

- [ ] Update package list:
  Command: `sudo apt update`

- [ ] Install UFW:
  Command: `sudo apt install ufw`

- [ ] Enable the firewall:
  Command: `sudo ufw enable`
  Confirm with `y` when prompted

- [ ] Allow SSH traffic:
  Command: `sudo ufw allow ssh`
  Note: Prevents locking yourself out

- [ ] Verify firewall status:
  Command: `sudo ufw status verbose`

- [ ] Review UFW documentation:
  Command: `man ufw`

------------------------------------------------------------
Exercise 4: Install and Test SSH Access
Objective:
Install OpenSSH Server and validate secure remote connectivity.

- [ ] Install OpenSSH Server:
  Command: `sudo apt install openssh-server`
  Confirm with `y` when prompted

- [ ] Enable SSH at boot:
  Command: `sudo systemctl enable ssh`

- [ ] Start the SSH service:
  Command: `sudo systemctl start ssh`

- [ ] Verify SSH service status:
  Command: `sudo systemctl status ssh`
  Exit with `q`

- [ ] Review SSH configuration:
  Command: `sudo cat /etc/ssh/sshd_config`

- [ ] Test SSH connection from second VM:
  Command:
  `ssh <your-username>@<second-vm-ip>`
  Enter password when prompted
  Exit session with `exit`

- [ ] Review SSH documentation:
  Commands:
  `man ssh`
  `man sshd_config`
